<!-- @profile = {"about":null,"ambition":null,"codecademy":null,"dob":"1978-09-23","employment_status":"Self-employed","first_name":"TAMLYN","gender":"FEMALE","github":"tamlyn10","homepage":"","how_did_you_hear":"Course Report!","js_track_completedness":null,"last_name":"RUDOLPH","learning_experience":null,"phone_number":"07471286289","primes_sum":null,"projects":null,"rationale":null,"ruby_track_completedness":null,"twitter":"","web_track_completedness":null}
 -->

<%# puts @cont[:ambition] %>

    <!-- Page Content -->
        <% if @profile %>

            <!-- Tamlyn Intro -->
            <div class="row" style="margin-bottom: 15px;">
                
                <div class="col-lg-3">
                    <img class="img-responsive img-circle" src="images/tam.png" />
                </div>
                
                <div class="col-lg-8 col-lg-offset-1 well">
                    <p>
                        <ul>
                            <li class = "profile-value" id="name">Name: <%=@profile["first_name"]%> <%=@profile["last_name"]%> </li>
                            <li class = "profile-value">Dob: <%=@profile["dob"]%> </li>
                            <li class = "profile-value">Gender: <%=@profile["gender"]%></li>
                            <li class = "profile-value">Employment Status: <%=@profile["employment_status"]%> </li>
                            <li class = "profile-value">GitHub: <%=@profile["github"]%> </li>
                            <li class = "profile-value">Phone Number: <%=@profile["phone_number"]%> </li>                            
                            <li class = "profile-value">CodeAcademy: <%=@profile["codecademy"]%> </li>
                            <li class = "profile-value">Homepage: <%=@profile["homepage"]%> </li>


                        </ul>

                    </p>
                </div>


            </div>
            <!-- /.row -->            


            <!-- Dynamic Nav Bars -->

            <div class="row">
                <div class="col-lg-12">
                  <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#home">About</a></li>
                    <li><a data-toggle="tab" href="#menu1">Ambition</a></li>
                    <li><a data-toggle="tab" href="#menu2">Learning</a></li>
                    <li><a data-toggle="tab" href="#menu3">Rationale</a></li>
                    <li><a data-toggle="tab" href="#menu4">Projects</a></li>
                  </ul>

                  <div class="tab-content">
                    
                        <div id="home" class="tab-pane fade in active well">
                              <p class="profile-value"><%=@cont[:about]%></p>
                        </div>
                        <div id="menu1" class="tab-pane fade well">
                              <p class="profile-value"><%=@cont[:ambition]%></p>
                        </div>
                        <div id="menu2" class="tab-pane fade well">
                              <p class="profile-value"><%=@cont[:learning_experience]%></p>
                        </div>
                        <div id="menu3" class="tab-pane fade well">
                              <p class="profile-value"><%=@cont[:rationale]%></p>
                        </div>
                        <div id="menu4" class="tab-pane fade well">
                              <p class="profile-value"><%=@cont[:projects]%></p>
                        </div>
                  
                  </div>
                </div>
            </div>
                <!-- End Dynamic Nav Bars -->

            <!-- Final Row -->
            <div class="row">
                <!--Programming Problems -->
                <div class="col-md-6 prog-probs">
                    <a href="/primes">My Prime Number Solution</a>
                        <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                    </a>
                    <h3>
                        <a href="#">Programming Problems</a>
                    </h3>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae.</p>
                </div>
                <!--Update Profile Form -->
                 


                <!-- form -->
                <div class="col-md-6 update-fields">       

                        <!-- Want this dropdown choice to pre-populate the form / text-box below -->
                        <div class="dropdown">
                          
                          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Section to Edit<span class="caret"></span></button>
                          
                          <ul class="dropdown-menu">
                            <li><a href="#" onclick="pre_pop('about')">About</a></li>
                            <li><a href="#" onclick="#">Ambition</a></li>
                            <li><a href="#" onclick="pre_pop()">Learning</a></li>                            
                            <li><a href="#" onclick="pre_pop()">Rationale</a></li>                            
                            <li><a href="#" onclick="pre_pop()">Projects</a></li>
                          </ul>
                        
                        </div>



                        <form class="form-horizontal" role="form" action="update" method="post">
                          <div class="form-group edit-txt">
                            <div class="col-sm-10"> 
                            <textarea class="form-control" type="text" name = "trainee[first_name]" value="Update Profile" rows="15" id="change" placeholder="Edit Text"></textarea>
                            </div>
                          </div>
                          
                          <div class="form-group"> 
                            <div class="col-lg-2">
                              <button type="submit" value="Update Profile" class="btn btn-default">Submit</button>
                            </div>
                          </div>
                        </form>
                        

<!-- 
                        <form role="form">
                            <div class="form-group">
                              <label for="comment">Comment:</label>
                              <textarea class="form-control" rows="5" id="comment"></textarea>
                            </div>
                          </form> -->

                </div>
                <!-- /form -->
            
            </div>
            <!-- /.row -->

<!-- TODO - Add more fields so that your profile can be edited -->
<!-- <div class="box">
    <h3>Edit Profile</h3>

    <form action="/update" method="POST">
      
      <fieldset>

        <div class="form-group">
          <label for="trainee[about]">About</label>
          <input type="text" name="trainee[about]" value="Update Profile"/>
        </div>

        

        <input type="submit" value="Update Profile" class="btn btn-primary" />
      
      </fieldset>
    </form>
  </div> -->
<!-- end profile update -->  


            <!-- Page Footer -->
            <div class="footer">
                <div class="row">
                    <div class="col-lg-12 well">
                        <p>You may be interested to know that there are <span id="word-count"></span> words in the profile content on this page.</p>
                    </div>
                </div>
            </div>
            <!-- /.row -->


<!-- Else for @profile == false --> 

<% else %>
  <div class="welcome">
    <p>Welcome! Once you have updated the OAuth tokens, the link below will fetch your profile information.</p>

    <a href="/authorise">Authorise</a>

<% end %> 


<!-- Add your Javascript to this script tag -->
<script language="javascript">

    // count total words by counting spaces that immediately follow a letter.

    function countwords(text_block){
      var total_words = 0;
      var text = text_block;
          
          if(text_block.length > 0){
            total_words = 1;
            for (var j = 1; j <= text.length-1; j++){
              if ((text[j] === " ")&&(text[j-1]!= " ")) {
                total_words ++;
              }
            }
          }
        
    return total_words;
  }

    console.log(document.getElementById('change').innerHTML);

    function pre_pop(key){
      var k = key;
      console.log(k);
      var pre_cont = "<%=@cont[:about]%>";
      console.log("the pre-cont is " + pre_cont);
      document.getElementById('change').innerHTML = "<%=@cont[:about]%>";
  
    }

    function generate_params(key){
      
      var k = key;
      var str = "trainee[" + k + "]";

      return str

    }

    var y = generate_params("first_name");
    console.log(y);

    function post_update(key){

      update_txt = document.getElementById('change').innerHTML;

    }


  // count all words in the profile sections of the document
  var profile_values = document.getElementsByClassName('profile-value');
  var total_content=[]; //one long string of whole page content
  var profile_content=[]; //array of content for each section - not sure if it's needed or whether i'll just call the funciton directly on the innerHTML

    for(i = 0; i < profile_values.length; i++){
    var P = profile_values[i].innerHTML;
    profile_content.push(P);
    total_content += P + " ";  
    }

  var total_words = countwords(total_content); //whole page words
  console.log(profile_content);

  console.log("Number of words is :" + total_words);
  document.getElementById('word-count').innerHTML = total_words;

// ## Num words histogram....

// words = total_words.split(" ")
// frequencies = Hash.new(0)
// words.each { |word| frequencies[word] += 1 }
// frequencies = frequencies.sort_by {|a, b| b }
// frequencies.reverse!
// frequencies.each { |word, frequency| puts word + " " + frequency.to_s }

</script>

